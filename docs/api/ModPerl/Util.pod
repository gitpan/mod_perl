=head1 NAME

ModPerl::Util - Helper mod_perl 2.0 Functions




=head1 Synopsis

  use ModPerl::Util;
  
  $callback = Apache::current_callback;
  
  ModPerl::Util::exit();
  
  ModPerl::Util::untaint($) # secret API?




=head1 Description

C<ModPerl::Util> provides mod_perl 2.0 util functions.





=head1 API

C<ModPerl::Util> provides the following functions and/or methods:




=head2 C<untaint>

Untaint the variable, by turning its tainted bit off (used internally).

  untaint($var);

=over 4

=item arg1: C<$var> (scalar)

=item ret: no return value

=back

Do not use this function unless you know what you are doing. To learn
how to properly untaint variables refer to the I<perlsec> manpage.


=head2 C<current_callback>

Returns the currently running callback, like 'PerlResponseHandler'.

  $callback = Apache::current_callback();

=over 4

=item ret: C<$callback> (string)

=back





=head2 C<exit>

Terminate the request, but not the current process (or not the current
Perl interpreter with threaded mpms).

  ModPerl::Util::exit($status);

=over 4

=item opt arg1: C<$status> (integer)

The exit status, which as of this writing is ignored.

=item ret: no return value

=item since: 1.99_14

=back

Normally you will use the plain C<exit()> in your code. You don't need
to use C<ModPerl::Util::exit> explicitly, since mod_perl overrides
C<exit()> by setting C<CORE::GLOBAL::exit> to
C<ModPerl::Util::exit>. Only if you redefine C<CORE::GLOBAL::exit>
once mod_perl is running, you may want to use this function.

The original C<exit()> is still available via C<CORE::exit()>.

C<ModPerl::Util::exit> is implemented as a special C<die()> call,
therefore if you call it inside C<eval BLOCK> or C<eval "STRING">,
while an exception is being thrown, it is caught by C<eval>. For
example:

  exit;
  print "Still running";

will not print anything. But:

  eval {
     exit;
  }
  print "Still running";

will print I<Still running>. So you either need to check whether L<the
exception|docs::2.0::api::APR::Error> is specific to C<exit> and call
C<exit()> again:

  use ModPerl::Const -compile => 'EXIT';
  eval {
     exit;
  }
  exit if $@ && ref $@ eq 'APR::Error' && $@ == ModPerl::EXIT;
  print "Still running";

or use C<CORE::exit()>:

  eval {
     CORE::exit;
  }
  print "Still running";

and nothing will be printed. The problem with the latter is the
current process (or a Perl Interpreter) will be killed; something that
you really want to avoid under mod_perl.


=head1 See Also

L<mod_perl 2.0 documentation|docs::2.0::index>.




=head1 Copyright

mod_perl 2.0 and its core modules are copyrighted under
The Apache Software License, Version 1.1.




=head1 Authors

L<The mod_perl development team and numerous
contributors|about::contributors::people>.

=cut

